{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap df424560a77b28f004a0","webpack:///./src/index.js","webpack:///./src/router/EventStage.js","webpack:///./src/router/Router.js","webpack:///./src/router/Status.js","webpack:///./src/router/EventContext.js","webpack:///./src/system/index.js","webpack:///./src/system/disposables/index.js","webpack:///./src/system/disposables/CompositeDisposable.js","webpack:///./src/system/Guard.js","webpack:///./src/system/utils.js","webpack:///./src/system/disposables/DisposableWrapper.js","webpack:///./src/system/disposables/DictionaryDisposable.js","webpack:///./src/system/logger.js","webpack:///./src/router/ModelRecord.js","webpack:///./src/router/State.js","webpack:///./src/reactive/index.js","webpack:///./src/reactive/extMethods/do.js","webpack:///./src/reactive/Observable.js","webpack:///./src/reactive/Observer.js","webpack:///./src/reactive/extMethods/where.js","webpack:///./src/reactive/extMethods/asObservable.js","webpack:///./src/reactive/extMethods/beginWork.js","webpack:///./~/node-uuid/uuid.js","webpack:///./src/model/index.js","webpack:///./src/model/events/index.js","webpack:///./src/model/events/AsyncWorkCompleteEvent.js","webpack:///./src/model/events/SubModelChangedEvent.js","webpack:///./src/model/DisposableBase.js","webpack:///./src/model/ModelBase.js","webpack:///./src/model/ModelRootBase.js","webpack:///./src/reactive/extMethods/take.js","webpack:///./src/reactive/Subject.js"],"names":[],"mappings":"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","file":"esp.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"esp\"] = factory();\n\telse\n\t\troot[\"esp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap df424560a77b28f004a0\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nexports.EventStage = require('./router/EventStage');\nexports.Router = require('./router/Router');\nexports.model = require('./model');\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/index.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\n\nclass EventStage {\n    static get preview() { return  'preview'; }\n    static get normal() { return  'normal'; }\n    static get committed() { return  'committed'; }\n}\n\nexport default EventStage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/router/EventStage.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport EventContext from './EventContext';\nimport EventStage from './EventStage';\nimport ModelRecord from './ModelRecord';\nimport State from './State.js';\nimport Status from './Status.js';\n\nimport { Subject, Observable } from '../reactive/index';\nimport { SubModelChangedEvent } from '../model/events/index';\nimport { Guard, utils, logger } from '../system';\n\nvar _log = logger.create('Router');\n\nexport default class Router {\n    constructor() {\n        this._models = {};\n        this._modelUpdateSubjects = {};\n        this._modelEventSubjects = {};\n        this._haltingException = undefined;\n        this._state = new State();\n    }\n    registerModel(modelId, model, options) {\n        this._throwIfHalted();\n        Guard.isString(modelId, 'The modelId argument should be a string');\n        Guard.isDefined(model, 'THe model argument must be defined');\n        if(options) Guard.isObject(options, 'The options argument should be an object');\n        Guard.isFalsey(this._models[modelId], 'The model with id [' + modelId + '] is already registered');\n        this._models[modelId] = new ModelRecord(undefined, modelId, model, options);\n    }\n    addChildModel(parentModelId, childModelId, model, options) {\n        this._throwIfHalted();\n        Guard.isString(parentModelId, 'The parentModelId argument should be a string');\n        Guard.isString(childModelId, 'The childModelId argument should be a string');\n        Guard.isDefined(model, 'The model argument should be defined');\n        if(options) Guard.isObject(options, 'The options argument should be an object');\n\n        var parentModelRecord = this._models[parentModelId];\n        if(!parentModelRecord) {\n            throw new Error('Parent model with id [' + parentModelId + '] is not registered');\n        }\n        this._models[childModelId] = new ModelRecord(parentModelId, childModelId, model, options);\n        parentModelRecord.childrenIds.push(childModelId);\n    }\n    removeModel(modelId){\n        Guard.isString(modelId, 'The modelId argument should be a string');\n\n        let modelRecord = this._models[modelId];\n        if(modelRecord){\n            modelRecord.wasRemoved = true;\n            delete this._models[modelId];\n            modelRecord.eventQueue.length = 0;\n            let modelUpdateSubjects = this._modelUpdateSubjects[modelId];\n            if(modelUpdateSubjects) {\n                delete this._modelUpdateSubjects[modelId];\n                modelUpdateSubjects.onCompleted();\n            }\n            let modelEventSubjects = this._modelEventSubjects[modelId];\n            if(modelEventSubjects) {\n                delete this._modelEventSubjects[modelId];\n                for (let p in modelEventSubjects) {\n                    if(modelEventSubjects.hasOwnProperty(p)) {\n                        let eventSubjects = modelEventSubjects[p];\n                        eventSubjects.preview.onCompleted();\n                        eventSubjects.normal.onCompleted();\n                        eventSubjects.committed.onCompleted();\n                    }\n                }\n            }\n            for (let i = 0, len = modelRecord.childrenIds.length; i < len; i++) {\n                var childModelId = modelRecord.childrenIds[i];\n                this.removeModel(childModelId);\n            }\n            if(modelRecord.parentModelId) {\n                var parentModelRecord = this._models[modelRecord.parentModelId];\n                // parentModelRecord will be undefined if the parent was first removed\n                if(parentModelRecord) {\n                    for (let i = 0; i < parentModelRecord.childrenIds.length; i++) {\n                        if (parentModelRecord.childrenIds[i] === modelId) {\n                            parentModelRecord.childrenIds.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    publishEvent(modelId, eventType, event) {\n        Guard.isString(modelId, 'The modelId argument should be a string');\n        Guard.isString(eventType, 'The eventType argument should be a string');\n        Guard.isDefined(event, 'The event argument must be defined');\n\n        this._throwIfHalted();\n        if (this._state.currentStatus === Status.EventExecution) {\n            throw new Error('You can not publish further events when performing an event execution. modelId1: [' + modelId + '], eventType:[' + eventType + ']');\n        }\n        let modelRecord = this._models[modelId];\n        if (typeof modelRecord === 'undefined') {\n            throw new Error('Can not publish event of type [' + eventType + '] as model with id [' + modelId + '] not registered');\n        } else {\n            try {\n                modelRecord.eventQueue.push({eventType: eventType, event: event});\n                this._purgeEventQueues();\n            } catch (err) {\n                this._halt(err);\n            }\n        }\n    }\n    broadcastEvent(eventType, event) {\n        Guard.isString(eventType, 'The eventType argument should be a string');\n        Guard.isDefined(event, 'The event argument should be defined');\n        for (let modelId in this._models) {\n            if (this._models.hasOwnProperty(modelId)) {\n                let modelRecord = this._models[modelId];\n                modelRecord.eventQueue.push({eventType: eventType, event: event});\n                this._purgeEventQueues();\n            }\n        }\n    }\n    executeEvent(eventType, event) {\n        this._throwIfHalted();\n        Guard.isString(eventType, 'The eventType argument should be a string');\n        Guard.isDefined(event, 'The event argument should be defined');\n\n        this._state.executeEvent(() => {\n            let eventContext = new EventContext(\n                this._state.currentModelId,\n                eventType,\n                event\n            );\n            this._dispatchEventToEventProcessors(\n                this._state.currentModelId,\n                this._state.currentModel,\n                event,\n                eventType,\n                eventContext\n            );\n        });\n    }\n    getEventObservable(modelId, eventType, stage) {\n        return Observable.create(o => {\n            this._throwIfHalted();\n            Guard.isString(modelId, 'The modelId argument should be a string');\n            Guard.isDefined(modelId, 'The modelId argument should be defined');\n            Guard.isDefined(eventType, 'The eventType argument should be defined');\n\n            if(stage) {\n                Guard.isString(stage, 'The stage argument should be a string');\n                Guard.isTrue(stage === EventStage.preview || stage === EventStage.normal || stage === EventStage.committed, 'The stage argument value of [' + stage + '] is incorrect. It should be preview, normal or committed.');\n            } else {\n                stage = EventStage.normal;\n            }\n            let subjects = this._getModelsEventSubjects(modelId, eventType);\n            let subject = subjects[stage];\n            return subject.observe(o);\n        }, this);\n    }\n    getModelObservable(modelId) {\n        return Observable.create(o => {\n            this._throwIfHalted();\n            Guard.isString(modelId, 'The modelId should be a string');\n\n            let updateSubject = this._modelUpdateSubjects[modelId];\n            if (typeof updateSubject === 'undefined') {\n                updateSubject = new Subject(this);\n                this._modelUpdateSubjects[modelId] = updateSubject;\n            }\n            return updateSubject.observe(o);\n        }, this);\n    }\n    _getModelsEventSubjects(modelId, eventType) {\n        let modelEventSubject = this._modelEventSubjects[modelId];\n        if (typeof modelEventSubject === 'undefined') {\n            modelEventSubject = {};\n            this._modelEventSubjects[modelId] = modelEventSubject;\n        }\n        let subjects = modelEventSubject[eventType];\n        if (typeof subjects === 'undefined') {\n            subjects = {\n                preview: new Subject(this),\n                normal: new Subject(this),\n                committed: new Subject(this)\n            };\n            modelEventSubject[eventType] = subjects;\n        }\n        return subjects;\n    }\n    _purgeEventQueues() {\n        if (this._state.currentStatus === Status.Idle) {\n            let modelRecord = this._getNextModelRecordWithQueuedEvents();\n            let hasEvents = true;\n\n            // TODO -> Explanation of why we have the two while loops\n            while (hasEvents) {\n                while (hasEvents) {\n                    this._state.moveToPreProcessing(modelRecord.modelId, modelRecord.model);\n                    let eventRecord = modelRecord.eventQueue.shift();\n                    if (modelRecord.model.unlock && typeof modelRecord.model.unlock === 'function') {\n                        modelRecord.model.unlock();\n                    }\n                    var eventContext = new EventContext(modelRecord.modelId, eventRecord.eventType, eventRecord.event);\n                    modelRecord.runPreEventProcessor(modelRecord.model, eventRecord.event, eventContext);\n                    if (!modelRecord.wasRemoved) {\n                        if (!eventContext.isCanceled) {\n                            this._state.moveToEventDispatch();\n                            while (hasEvents) {\n                                let wasDispatched = this._dispatchEventToEventProcessors(modelRecord.modelId, modelRecord.model, eventRecord.event, eventRecord.eventType, eventContext);\n                                if (modelRecord.wasRemoved) break;\n                                if (!modelRecord.hasChanges && wasDispatched) {\n                                    modelRecord.hasChanges = true;\n                                }\n                                hasEvents = modelRecord.eventQueue.length > 0;\n                                if (hasEvents) {\n                                    eventRecord = modelRecord.eventQueue.shift();\n                                    eventContext = new EventContext(modelRecord.modelId, eventRecord.eventType, eventRecord.event);\n                                }\n                            } // keep looping until any events from the dispatch to processors stage are processed\n                        }\n                        if (!modelRecord.wasRemoved) {\n                            this._state.moveToPostProcessing();\n                            modelRecord.runPostEventProcessor(modelRecord.model, eventRecord.event, eventContext);\n                            if (modelRecord.model.lock && typeof modelRecord.model.lock === 'function') {\n                                modelRecord.model.lock();\n                            }\n                        }\n                    }\n                    if (modelRecord.parentModelId) {\n                        // if we're currently processing a child model, we raise a 'modelChangedEvent' to the parent\n                        // and set it as the next model to process.\n                        this.publishEvent(modelRecord.parentModelId, 'modelChangedEvent', new SubModelChangedEvent(modelRecord.modelId, eventRecord.eventType));\n                        modelRecord = this._models[modelRecord.parentModelId];\n                        hasEvents = true;\n                    } else {\n                        modelRecord = this._getNextModelRecordWithQueuedEvents();\n                        hasEvents = typeof modelRecord !== 'undefined';\n                    }\n                }  // keep looping until any events raised during post event processing OR event that have come in for other models are processed\n                this._state.moveToDispatchModelUpdates();\n                this._dispatchModelUpdates();\n                modelRecord = this._getNextModelRecordWithQueuedEvents();\n                hasEvents = typeof modelRecord !== 'undefined';\n            } // keep looping until any events from the dispatch updates stages are processed\n            this._state.moveToIdle();\n        }\n    }\n    _dispatchEventToEventProcessors(modelId, model, event, eventType, eventContext) {\n        let dispatchEvent = (model1, event1, context, subject) => {\n            let wasDispatched = false;\n            if (subject.getObserverCount() > 0) {\n                // note: if the model was removed by an observer the subject will be completed so subsequent observers won't get the event\n                subject.onNext(model1, event1, context);\n                if(subject.hasError) {\n                    throw subject.error;\n                }\n                wasDispatched = true;\n            }\n            return wasDispatched;\n        };\n\n        let eventSubjects = this._getModelsEventSubjects(modelId, eventType);\n        let wasDispatched = dispatchEvent(model, event, eventContext, eventSubjects.preview);\n        if (eventContext.isCommitted) {\n            throw new Error('You can\\'t commit an event at the preview stage. Event: [' + eventContext.eventType + '], ModelId: [' + modelId + ']');\n        }\n        if (!eventContext.isCanceled) {\n            wasDispatched = dispatchEvent(model, event, eventContext, eventSubjects.normal);\n            if (eventContext.isCanceled) {\n                throw new Error('You can\\'t cancel an event at the normal stage. Event: [' + eventContext.eventType + '], ModelId: [' + modelId + ']');\n            }\n            if (wasDispatched && eventContext.isCommitted) {\n                dispatchEvent(model, event, eventContext, eventSubjects.committed);\n                if (eventContext.isCanceled) {\n                    throw new Error('You can\\'t cancel an event at the committed stage. Event: [' + eventContext.eventType + '], ModelId: [' + modelId + ']');\n                }\n            }\n        }\n        return wasDispatched;\n    }\n    _dispatchModelUpdates() {\n        let updates = [], modelUpdateSubject;\n        for (let modelId in this._models) {\n            if (this._models.hasOwnProperty(modelId)) {\n                let modelRecord = this._models[modelId];\n                if (modelRecord.hasChanges) {\n                    modelRecord.hasChanges = false;\n                    updates.push(modelRecord);\n                }\n            }\n        }\n        for (let i = 0, len = updates.length; i < len; i++) {\n            modelUpdateSubject = this._modelUpdateSubjects[updates[i].modelId];\n            if (typeof modelUpdateSubject !== 'undefined') {\n                modelUpdateSubject.onNext(updates[i].model);\n                if(modelUpdateSubject.hasError) {\n                    throw modelUpdateSubject.error;\n                }\n            }\n        }\n    }\n    _getNextModelRecordWithQueuedEvents() {\n        let nextModel;\n        for (let modelId in this._models) {\n            if (this._models.hasOwnProperty(modelId)) {\n                let current = this._models[modelId];\n                if (current.eventQueue.length > 0) {\n                    nextModel = current;\n                    break;\n                }\n            }\n        }\n        return nextModel;\n    }\n    _throwIfHalted() {\n        if (this._state.currentStatus === Status.Halted) {\n            let message = utils.format('Event router halted due to previous error [{0}]', this._haltingException);\n            throw new Error(message);\n        }\n    }\n    _halt(err) {\n        this._state.moveToHalted();\n        _log.error('Router halted error: [{0}]', err);\n        this._haltingException = err;\n        throw err;\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/router/Router.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nexport default class Status {\n    static get Idle() { return 'idle'; }\n    static get PreEventProcessing() { return 'preEventProcessorDispatch'; }\n    static get EventProcessorDispatch() { return 'eventProcessorDispatch'; }\n    static get EventExecution() { return 'eventProcessorExecution'; }\n    static get PostProcessing () { return 'postEventProcessorDispatch'; }\n    static get DispatchModelUpdates() { return 'dispatchModelUpdates'; }\n    static get Halted() { return 'halted'; }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/router/Status.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport { Guard } from '../system';\n\nclass EventContext {\n    constructor(modelId, eventType, event) {\n        Guard.isString(modelId, \"The modelId should be a string\");\n        Guard.isString(eventType, \"The eventType should be a string\");\n        Guard.isDefined(event, \"The event should be defined\");\n        this._modelId = modelId;\n        this._eventType = eventType;\n        this._event = event;\n        this._isCanceled = false;\n        this._isCommitted = false;\n    }\n    get isCanceled() {\n        return this._isCanceled;\n    }\n    get isCommitted() {\n        return this._isCommitted;\n    }\n    get modelId() {\n        return this._modelId;\n    }\n    get event() {\n        return this._event;\n    }\n    get eventType() {\n        return this._eventType;\n    }\n    cancel() {\n        if(!this._isCanceled) {\n            this._isCanceled = true;\n        } else {\n            throw new Error('event is already cancelled');\n        }\n    }\n    commit() {\n        if(!this._isCommitted) {\n            this._isCommitted = true;\n        } else {\n            throw 'event is already committed';\n        }\n    }\n}\n\nexport default EventContext;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/router/EventContext.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport disposables from './disposables';\nimport Guard from './Guard';\nimport * as logger from './logger';\nimport * as utils  from './utils'; \nexport default { disposables, Guard, logger, utils };\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/index.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport CompositeDisposable from './CompositeDisposable';\nimport DictionaryDisposable from './DictionaryDisposable';\nimport DisposableWrapper from './DisposableWrapper';\nexport default { CompositeDisposable, DictionaryDisposable, DisposableWrapper };\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/disposables/index.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport Guard from '../Guard';\nimport DisposableWrapper from './DisposableWrapper';\n\nexport default class CompositeDisposable {\n    constructor() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    add(disposable) {\n        var disposableWrapper = new DisposableWrapper(disposable);\n        if(this._isDisposed) {\n            disposableWrapper.dispose();\n            return;\n        }\n        this._disposables.push(disposableWrapper);\n    }\n    dispose() {\n        if(!this._isDisposed) {\n            this._isDisposed = true;\n            for (var i = 0, len = this._disposables.length; i < len; i++) {\n                var disposable = this._disposables[i];\n                disposable.dispose();\n            }\n            this._disposables.length = 0;\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/disposables/CompositeDisposable.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport * as utils from './utils';\n\nexport default class Guard {\n    static isDefined(value, message) {\n        if (typeof value === 'undefined') {\n            doThrow(message);\n        }\n    }\n    static isFalsey(value, message) {\n        if (value) {\n            doThrow(message);\n        }\n    }\n    static lengthIs(array, length, message) {\n        if (array.length !== length) {\n            doThrow(message);\n        }\n    }\n    static lengthGreaterThan(array, expected, message) {\n        if (array.length < expected) {\n            doThrow(message);\n        }\n    }\n    static lengthIsAtLeast(array, expected, message) {\n        if (array.length < expected) {\n            doThrow(message);\n        }\n    }\n    static isString(value, message) {\n        if (!utils.isString(value)) {\n            doThrow(message);\n        }\n    }\n    static isTrue(check, message) {\n        if (!check) {\n            doThrow(message);\n        }\n    }\n    static isFunction(item, message) {\n        if (typeof(item) != \"function\") {\n            doThrow(message);\n        }\n    }\n    static isNumber(value, message) {\n        if (isNaN(value)) {\n            doThrow(message);\n        }\n    }\n    static isObject(value,message) {\n        if(typeof value !== 'object') {\n            doThrow(message);\n        }\n    }\n}\n\nfunction doThrow(message) {\n    if(typeof message === 'undefined' || message === '') {\n        throw new Error(\"Argument error\");\n    }\n    throw new Error(message);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/Guard.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nexport function removeAll(arr, item) {\n    for(var i = arr.length; i--;) {\n        if(arr[i] === item) {\n            arr.splice(i, 1);\n        }\n    }\n}\n\nexport function isString(value) {\n    return typeof value == 'string' || value instanceof String;\n}\n\nexport function format(formatString) {\n    //Guard.isString(format, \"First argument to a log function should be a string, but got [\" + format + \"]\");\n    var args = Array.prototype.slice.call(arguments, 1);\n    var message = formatString.replace(/{(\\d+)}/g, function (match, number) {\n        return typeof args[number] != 'undefined'\n            ? args[number]\n            : match;\n    });\n    return message;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/utils.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport Guard from '../Guard';\n\nexport default class DisposableWrapper {\n    constructor(disposable) {\n        Guard.isDefined(disposable, \"disposable must be defined\");\n        var innerDisposable;\n        if(typeof disposable === 'function') {\n            innerDisposable = { dispose: function() { disposable(); } };\n        } else if(disposable.dispose && typeof disposable.dispose === 'function') {\n            innerDisposable = {\n                dispose: () => {\n                    // at this point if something has deleted the dispose or it's not a function we just ignore it.\n                    if (disposable.dispose && typeof disposable.dispose === 'function') {\n                        disposable.dispose();\n                    }\n                }\n            };\n        } else {\n            throw new Error('Item to dispose was neither a function nor had a dispose method.');\n        }\n        this._isDisposed = false;\n        this._disposable = innerDisposable;\n    }\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    dispose() {\n        if(!this._isDisposed && this._disposable) {\n            this._isDisposed = true;\n            this._disposable.dispose();\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/disposables/DisposableWrapper.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport DisposableWrapper from './DisposableWrapper';\n\nexport default class DictionaryDisposable {\n    constructor() {\n        this._isDisposed = false;\n    }\n    add(key, disposable) {\n        if(this.hasOwnProperty(key)) {\n            throw new Error(\"Key \" + key + \" already found\");\n        }\n        var disposableWrapper = new DisposableWrapper(disposable);\n        if(this._isDisposed) {\n            disposableWrapper.dispose();\n            return;\n        }\n        this[key] = disposableWrapper;\n    }\n    remove(key) {\n        if(this.hasOwnProperty(key)) {\n            delete this[key];\n        }\n    }\n    dispose() {\n       // if(!this._isDisposed) {\n            this._isDisposed = true;\n            for (var p in this) {\n                if (this.hasOwnProperty(p)) {\n                    var disposable = this[p];\n                    if (disposable.dispose) {\n                        disposable.dispose();\n                    }\n                }\n            }\n       // }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/disposables/DictionaryDisposable.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport Guard from './Guard';\n\nvar levels = {\n    verbose:0,\n    debug:1,\n    info:2,\n    warn:3,\n    error:4\n};\n\nvar _currentLevel = levels.debug;\n\nvar _sink = logEvent => {\n    console.log('[' + logEvent.logger + '] [' + logEvent.level + ']: ' + logEvent.message);\n};\n\nclass Logger {\n    constructor(name) {\n        this._name = name;\n    }\n\n    verbose(format) {\n        if (_currentLevel <= levels.verbose) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            this._log(\"VERBOSE\", format, args);\n        }\n    }\n\n    debug(format) {\n        if (_currentLevel <= levels.debug) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            this._log(\"DEBUG\", format, args);\n        }\n    }\n\n    info(format) {\n        if (_currentLevel <= levels.info) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            this._log(\"INFO\", format, args);\n        }\n    }\n\n    warn(format) {\n        if (_currentLevel <= levels.warn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            this._log(\"WARN\", format, args);\n        }\n    }\n\n    error(format) {\n        if (_currentLevel <= levels.error) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            this._log(\"ERROR\", format, args);\n        }\n    }\n    _log(level, format, args) {\n        Guard.isString(format, \"First argument to a log function should be a string, but got [\" + format + \"]\");\n        var message = format.replace(/{(\\d+)}/g, function (match, number) {\n            return typeof args[number] != 'undefined'\n                ? args[number]\n                : match;\n        });\n        _sink({\n            logger: this._name,\n            level: level,\n            message: message\n        });\n    }\n}\n\nexport function create(name) {\n    Guard.isDefined(name, \"The name argument should be defined\");\n    Guard.isString(name, \"The name argument should be a string\");\n    return new Logger(name);\n}\n\nexport function setLevel(level) {\n    _currentLevel = level;\n}\n\nexport function setSink(sink) {\n    Guard.isFunction(sink, \"Logging sink argument must be a function\");\n    _sink = sink;\n}\n\nexport { levels };\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/system/logger.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport { Guard } from '../system';\n\nclass ModelRecord {\n    // parentModelId is undefined if it's the root\n    constructor(parentModelId, modelId, model, options) {\n        this._parentModelId = parentModelId;\n        this._modelId = modelId;\n        this._model = model;\n        this._eventQueue = [];\n        this._hasChanges = false;\n        this._wasRemoved = false;\n        this._runPreEventProcessor = this._createEventProcessor(\"preEventProcessor\", options ? options.preEventProcessor : undefined);\n        this._runPostEventProcessor = this._createEventProcessor(\"postEventProcessor\", options ? options.postEventProcessor : undefined);\n        this._childrenIds = [];\n    }\n    get parentModelId() {\n        return this._parentModelId;\n    }\n    get modelId() {\n        return this._modelId;\n    }\n    get model() {\n        return this._model;\n    }\n    get eventQueue() {\n        return this._eventQueue;\n    }\n    get hasChanges() {\n        return this._hasChanges;\n    }\n    set hasChanges(value) {\n        this._hasChanges = value;\n    }\n    get wasRemoved() {\n        return this._wasRemoved;\n    }\n    set wasRemoved(value) {\n        this._wasRemoved = value;\n    }\n    get runPreEventProcessor() {\n        return this._runPreEventProcessor;\n    }\n    get runPostEventProcessor() {\n        return this._runPostEventProcessor;\n    }\n    get childrenIds() {\n        return this._childrenIds;\n    }\n    _createEventProcessor(name, processor) {\n        if(processor) {\n            let isValid = typeof processor === 'function' || (typeof processor.process === 'function');\n            Guard.isTrue(isValid, name + \" should be a function or an object with a process() function\");\n            return (model, event, context) => {\n                // I guess it's possible the shape of the processor changed since we validated it, hence the recheck, another option could be to bind the initial value and always use that.\n                if(typeof processor === 'function') {\n                    processor(model, event, context);\n                } else if(typeof processor.process === 'function') {\n                    processor.process(model, event, context);\n                } else {\n                    throw new Error(name + \" is neither a function or an object with a process() method\");\n                }\n            };\n        }\n        return () => { /* noop processor */  };\n    }\n}\n\nexport default ModelRecord;\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/router/ModelRecord.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport { Guard } from '../system';\nimport Status from './Status.js';\n\n// note: perhaps some validation on state transition could be added here, but the tests cover most edges cases already\nexport default class State {\n    constructor() {\n        this._currentStatus = Status.Idle;\n    }\n    get currentStatus() {\n        return this._currentStatus;\n    }\n    get currentModelId() {\n        return this._currentModelId;\n    }\n    get currentModel() {\n        return this._currentModel;\n    }\n    moveToIdle() {\n        this._currentStatus = Status.Idle;\n        this._clear();\n    }\n    moveToPreProcessing(modelId, model) {\n        Guard.isString(modelId, 'The modelId should be a string');\n        Guard.isDefined(model, 'The model should be defined');\n        this._currentModelId = modelId;\n        this._currentModel = model;\n        this._currentStatus = Status.PreEventProcessing;\n    }\n    moveToEventDispatch() {\n        this._currentStatus = Status.EventProcessorDispatch;\n    }\n    moveToPostProcessing() {\n        this._currentStatus = Status.PostProcessing;\n    }\n    executeEvent(executeAction) {\n        var canMove = this._currentStatus === Status.PreEventProcessing || this._currentStatus === Status.EventProcessorDispatch || this._currentStatus === Status.PostProcessing;\n        Guard.isTrue(canMove, 'Can\\'t move to executing as the current state ' + this._currentStatus + ' doesn\\'t allow it');\n        var previousStatus = this._currentStatus;\n        this._currentStatus = Status.EventExecution;\n        executeAction();\n        this._currentStatus = previousStatus;\n    }\n    moveToDispatchModelUpdates() {\n        this._currentStatus = Status.DispatchModelUpdates;\n    }\n    moveToHalted() {\n        this._currentStatus = Status.Halted;\n        this._clear();\n    }\n    _clear() {\n        this._currentModelId = undefined;\n        this._currentModel = undefined;\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/router/State.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\n// these scripts have no exports, they add functionality to Observable\nimport './extMethods/where';\nimport './extMethods/asObservable';\nimport './extMethods/beginWork';\nimport './extMethods/take';\nimport './extMethods/do';\n\nexport { default as Observable } from './Observable';\nexport { default as Observer } from './Observer';\nexport { default as Subject } from './Subject';\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/index.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport Observable from '../Observable';\nimport { Guard } from '../../system';\n\n// TODO beta, needs test\nObservable.prototype.do = function(action) {\n    Guard.isFunction(action, \"provided value isn't a function\");\n    var source = this;\n    var observe =  observer => {\n        return source.observe(\n            (arg1, arg2, arg3) => {\n                action(arg1, arg2, arg3);\n                observer.onNext(arg1, arg2, arg3);\n            },\n            observer.onError.bind(observer),\n            () => observer.onCompleted()\n        );\n    };\n    return new Observable(observe, this._router);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/extMethods/do.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport { Guard } from '../system';\nimport Observer from './Observer';\n\nclass Observable {\n    static create(onObserve, router) {\n        Guard.lengthIs(arguments, 2, \"Incorrect argument count on Observable\");\n        var observe =  observer => {\n            return onObserve(observer);\n        };\n        return new Observable(observe, router);\n    }\n    constructor(observe, router) {\n        Guard.isDefined(observe, 'observe Required');\n        this._observe = observe;\n        /*\n         * note the Observable has explicit knowledge of the router to enable advanced\n         * scenarios whereby links in the observable stream re-post events back into the\n         * workflow, it enables the results of async operations and held event actions\n         * to be posted back through the full event workflow. It does feel a little dirty\n         * but it's reasonable for now. Perhaps the entire reactive objects could be wrapped\n         * in a configurable module whereby each instance of the router get's it's own copy,\n         * then only the explicit extensions to Observable could access the instance of\n         * the router they require.\n         */\n        this._router = router;\n    }\n    observe() {\n        var observer;\n        if(arguments.length === 1 && arguments[0] instanceof Observer) {\n            observer = arguments[0];\n        } else {\n            Guard.lengthIsAtLeast(arguments, 1, \"Incorrect args count of \" + arguments.length);\n            var onNext = arguments[0];\n            var onError = arguments.length >= 1 ? arguments[1] : undefined;\n            var onCompleted = arguments.length >= 2 ? arguments[2] : undefined;\n            observer = new Observer(onNext, onError, onCompleted);\n        }\n        return this._observe(observer);\n    }\n}\n\nexport default Observable;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/Observable.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport { Guard } from '../system';\n\nclass Observer {\n    constructor(onNext, onError, onCompleted) {\n        Guard.isDefined(onNext, 'onObserve Required');\n        this._hasError = false;\n        this._hasCompleted = false;\n        this._onNext = onNext;\n        this._onError = (ex) => {\n            if(typeof onError === 'undefined' || typeof onError !== 'function') {\n                throw ex; // we default to re-throwing if there is no error handler provide\n            }\n            else {\n                onError(ex);\n            }\n        };\n        this._onCompleted = () => {\n            if(typeof onCompleted !== 'undefined' && typeof onCompleted === 'function') {\n                onCompleted();\n            }\n        };\n    }\n    onNext(arg1, arg2, arg3) {\n        if(!this._hasError && !this._hasCompleted) {\n            this._onNext(arg1, arg2, arg3);\n        }\n    }\n    onError(value) {\n        if(!this._hasError) {\n            this._hasError = true;\n            this._onError(value);\n        }\n    }\n    onCompleted() {\n        if(!this._hasCompleted) {\n            this._hasCompleted = true;\n            this._onCompleted();\n        }\n    }\n}\nexport default Observer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/Observer.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport Observable from '../Observable';\nimport { Guard } from '../../system';\n\nObservable.prototype.where = function(predicate) {\n    Guard.isDefined(predicate, 'predicate Required');\n    var source = this;\n    var observe =  observer => {\n        return source.observe(\n            (arg1, arg2, arg3) => {\n                if(predicate(arg1, arg2, arg3)) {\n                    observer.onNext(arg1, arg2, arg3);\n                }\n            },\n            observer.onError.bind(observer),\n            () => observer.onCompleted()\n        );\n    };\n    return new Observable(observe, this._router);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/extMethods/where.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport Observable from '../Observable';\n\nObservable.prototype.asObservable = function() {\n    var source = this;\n    var observe =  observer => {\n        return source.observe(\n            (arg1, arg2, arg3) => {\n                observer.onNext(arg1, arg2, arg3);\n            },\n            observer.onError.bind(observer),\n            () => observer.onCompleted()\n        );\n    };\n    return new Observable(observe, this._router);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/extMethods/asObservable.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport uuid from 'node-uuid';\nimport Observable from '../Observable';\nimport model  from '../../model';\nimport system from '../../system';\nimport { Guard, utils, logger, disposables } from '../../system';\n\nvar CompositeDisposable = disposables.CompositeDisposable;\nvar DictionaryDisposable = disposables.DictionaryDisposable;\nvar AsyncWorkCompleteEvent = model.events.AsyncWorkCompleteEvent;\n\nvar _asyncWorkCompleteEventName = 'asyncWorkCompleteEvent';\n\n/*\n* Note: experimental, needs more test, doesn't work with .take()\n*\n* Used for asynchronous operations from event processors, this should only be used on event streams, a future revision will likely\n* enforce this or ensure the method only exists in the correct context.\n*\n* Note: this function may be removed in the future in favour of a pipeline that fully supports async interactions and is\n* more compatible with other libraries.\n* */\nObservable.prototype.beginWork = function(action) {\n    Guard.isDefined(action, 'action required, format: (ec : EventContext, done : (result : any) => { })');\n    var source = this;\n    var disposables = new CompositeDisposable();\n    var dictionaryDisposable = new DictionaryDisposable();\n    disposables.add(dictionaryDisposable);\n    var observe = observer => {\n        disposables.add(\n            source.observe(\n                (model, event, eventContext) => {\n                    let modelId = eventContext.modelId;\n                    let operationId = uuid.v1();\n                    var disposable = this._router\n                        .getEventObservable(modelId, _asyncWorkCompleteEventName)\n                        .where ((m, e) => e.operationId === operationId)\n                        .observe((m, e, ec) => {\n                            if(!disposables.isDisposed) {\n                                if(e.isFinished) {\n                                    disposable.dispose();\n                                    dictionaryDisposable.remove(operationId);\n                                }\n                                observer.onNext(m, e, ec);\n                            }\n                        });\n                    var onResultsReceived = (result, isFinished) => {\n                        if(!disposables.isDisposed) {\n                            isFinished = isFinished === 'undefined' ? true : isFinished;\n                            var asyncWorkCompleteEvent = new AsyncWorkCompleteEvent(operationId, result, isFinished);\n                            // publish the async results back through the router so the full event workflow is triggered\n                            source._router.publishEvent(modelId, _asyncWorkCompleteEventName, asyncWorkCompleteEvent);\n                        }\n                    };\n                    dictionaryDisposable.add(operationId, disposable);\n                    action(model, event ,eventContext, onResultsReceived);\n                },\n                observer.onError.bind(observer),\n                () => observer.onCompleted()\n            )\n        );\n        return disposables;\n    };\n    return new Observable(observe, this._router);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/extMethods/beginWork.js\n **/","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n(function() {\n  var _global = this;\n\n  // Unique ID creation requires a high quality random # generator.  We feature\n  // detect to determine the best RNG source, normalizing to a function that\n  // returns 128-bits of randomness, since that's what's usually required\n  var _rng;\n\n  // Node.js crypto-based RNG - http://nodejs.org/docs/v0.6.2/api/crypto.html\n  //\n  // Moderately fast, high quality\n  if (typeof(_global.require) == 'function') {\n    try {\n      var _rb = _global.require('crypto').randomBytes;\n      _rng = _rb && function() {return _rb(16);};\n    } catch(e) {}\n  }\n\n  if (!_rng && _global.crypto && crypto.getRandomValues) {\n    // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n    //\n    // Moderately fast, high quality\n    var _rnds8 = new Uint8Array(16);\n    _rng = function whatwgRNG() {\n      crypto.getRandomValues(_rnds8);\n      return _rnds8;\n    };\n  }\n\n  if (!_rng) {\n    // Math.random()-based (RNG)\n    //\n    // If all else fails, use Math.random().  It's fast, but is of unspecified\n    // quality.\n    var  _rnds = new Array(16);\n    _rng = function() {\n      for (var i = 0, r; i < 16; i++) {\n        if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n        _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n      }\n\n      return _rnds;\n    };\n  }\n\n  // Buffer class to use\n  var BufferClass = typeof(_global.Buffer) == 'function' ? _global.Buffer : Array;\n\n  // Maps for number <-> hex string conversion\n  var _byteToHex = [];\n  var _hexToByte = {};\n  for (var i = 0; i < 256; i++) {\n    _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n    _hexToByte[_byteToHex[i]] = i;\n  }\n\n  // **`parse()` - Parse a UUID into it's component bytes**\n  function parse(s, buf, offset) {\n    var i = (buf && offset) || 0, ii = 0;\n\n    buf = buf || [];\n    s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n      if (ii < 16) { // Don't overflow!\n        buf[i + ii++] = _hexToByte[oct];\n      }\n    });\n\n    // Zero out remaining bytes if string was short\n    while (ii < 16) {\n      buf[i + ii++] = 0;\n    }\n\n    return buf;\n  }\n\n  // **`unparse()` - Convert UUID byte array (ala parse()) into a string**\n  function unparse(buf, offset) {\n    var i = offset || 0, bth = _byteToHex;\n    return  bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]];\n  }\n\n  // **`v1()` - Generate time-based UUID**\n  //\n  // Inspired by https://github.com/LiosK/UUID.js\n  // and http://docs.python.org/library/uuid.html\n\n  // random #'s we need to init node and clockseq\n  var _seedBytes = _rng();\n\n  // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n  var _nodeId = [\n    _seedBytes[0] | 0x01,\n    _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n  ];\n\n  // Per 4.2.2, randomize (14 bit) clockseq\n  var _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n  // Previous uuid creation time\n  var _lastMSecs = 0, _lastNSecs = 0;\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v1(options, buf, offset) {\n    var i = buf && offset || 0;\n    var b = buf || [];\n\n    options = options || {};\n\n    var clockseq = options.clockseq != null ? options.clockseq : _clockseq;\n\n    // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n    var msecs = options.msecs != null ? options.msecs : new Date().getTime();\n\n    // Per 4.2.1.2, use count of uuid's generated during the current clock\n    // cycle to simulate higher resolution clock\n    var nsecs = options.nsecs != null ? options.nsecs : _lastNSecs + 1;\n\n    // Time since last uuid creation (in msecs)\n    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n    // Per 4.2.1.2, Bump clockseq on clock regression\n    if (dt < 0 && options.clockseq == null) {\n      clockseq = clockseq + 1 & 0x3fff;\n    }\n\n    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n    // time interval\n    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs == null) {\n      nsecs = 0;\n    }\n\n    // Per 4.2.1.2 Throw error if too many uuids are requested\n    if (nsecs >= 10000) {\n      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n    }\n\n    _lastMSecs = msecs;\n    _lastNSecs = nsecs;\n    _clockseq = clockseq;\n\n    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n    msecs += 12219292800000;\n\n    // `time_low`\n    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    b[i++] = tl >>> 24 & 0xff;\n    b[i++] = tl >>> 16 & 0xff;\n    b[i++] = tl >>> 8 & 0xff;\n    b[i++] = tl & 0xff;\n\n    // `time_mid`\n    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n    b[i++] = tmh >>> 8 & 0xff;\n    b[i++] = tmh & 0xff;\n\n    // `time_high_and_version`\n    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n    b[i++] = tmh >>> 16 & 0xff;\n\n    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n    b[i++] = clockseq >>> 8 | 0x80;\n\n    // `clock_seq_low`\n    b[i++] = clockseq & 0xff;\n\n    // `node`\n    var node = options.node || _nodeId;\n    for (var n = 0; n < 6; n++) {\n      b[i + n] = node[n];\n    }\n\n    return buf ? buf : unparse(b);\n  }\n\n  // **`v4()` - Generate random UUID**\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v4(options, buf, offset) {\n    // Deprecated - 'format' argument, as supported in v1.2\n    var i = buf && offset || 0;\n\n    if (typeof(options) == 'string') {\n      buf = options == 'binary' ? new BufferClass(16) : null;\n      options = null;\n    }\n    options = options || {};\n\n    var rnds = options.random || (options.rng || _rng)();\n\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n    // Copy bytes to buffer, if provided\n    if (buf) {\n      for (var ii = 0; ii < 16; ii++) {\n        buf[i + ii] = rnds[ii];\n      }\n    }\n\n    return buf || unparse(rnds);\n  }\n\n  // Export public API\n  var uuid = v4;\n  uuid.v1 = v1;\n  uuid.v4 = v4;\n  uuid.parse = parse;\n  uuid.unparse = unparse;\n  uuid.BufferClass = BufferClass;\n\n  if (typeof(module) != 'undefined' && module.exports) {\n    // Publish as node.js module\n    module.exports = uuid;\n  } else  if (typeof define === 'function' && define.amd) {\n    // Publish as AMD module\n    define(function() {return uuid;});\n \n\n  } else {\n    // Publish as global (in browsers)\n    var _previousRoot = _global.uuid;\n\n    // **`noConflict()` - (browser only) to reset global 'uuid' var**\n    uuid.noConflict = function() {\n      _global.uuid = _previousRoot;\n      return uuid;\n    };\n\n    _global.uuid = uuid;\n  }\n}).call(this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/node-uuid/uuid.js\n ** module id = 22\n ** module chunks = 0\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport events from './events';\nimport DisposableBase from './DisposableBase';\nimport ModelBase from './ModelBase';\nimport ModelRootBase from './ModelRootBase';\nexport default { events, DisposableBase, ModelBase, ModelRootBase};\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/model/index.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport AsyncWorkCompleteEvent from './AsyncWorkCompleteEvent';\nimport SubModelChangedEvent from './SubModelChangedEvent';\nexport default { AsyncWorkCompleteEvent, SubModelChangedEvent };\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/model/events/index.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nclass AsyncWorkCompleteEvent {\n    constructor(operationId, results, isFinished) {\n        this._operationId = operationId;\n        this._results = results;\n        this._isFinished = isFinished;\n    }\n    get operationId() {\n        return this._operationId;\n    }\n    get results() {\n        return this._results;\n    }\n    get isFinished() {\n        return this._isFinished;\n    }\n}\nexport default AsyncWorkCompleteEvent;\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/model/events/AsyncWorkCompleteEvent.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nclass SubModelChangedEvent {\n    constructor(childModelId, eventType) {\n        this._childModelId = childModelId;\n        this._eventType = eventType;\n    }\n    get childModelId() {\n        return this._childModelId;\n    }\n    get eventType() {\n        return this._eventType;\n    }\n}\nexport default SubModelChangedEvent;\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/model/events/SubModelChangedEvent.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport system from '../system';\n\nclass DisposableBase {\n    constructor() {\n        this._disposables = new system.disposables.CompositeDisposable();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    addDisposable (disposable) {\n        this._disposables.add(disposable);\n    }\n    dispose () {\n        this._disposables.dispose();\n    }\n}\nexport default DisposableBase;\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/model/DisposableBase.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\n/**\n * A base class for model entities.\n *\n * You don't need to derive from this to use the router, provided as a convenience\n */\nclass ModelBase {\n    constructor() {\n        this._checkIsLocked = () => true;\n    }\n    ensureLocked() {\n        if(this._checkIsLocked()) {\n            throw new Error(\"Model is locked, can't edit\");\n        }\n    }\n    get isLocked() {\n        return this._checkIsLocked();\n    }\n}\nexport default ModelBase;\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/model/ModelBase.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport ModelBase from './ModelBase';\n\n/**\n * A base class for the root model entity.\n *\n * You don't need to derive from this to use the router, provided as a convenience\n */\nclass ModelRootBase extends ModelBase {\n    constructor() {\n        super();\n        this._isLocked = true;\n        this._checkIsLocked = (function(){\n            return this._isLocked;\n        }).bind(this);\n    }\n    lock() {\n        this._isLocked = true;\n    }\n    unlock() {\n        this._isLocked = false;\n    }\n    bindLockPredicate() {\n        this._bindLockPredicate(this);\n    }\n    _bindLockPredicate(parent) {\n        parent = parent || this;\n        for (var key in parent) {\n            if(parent.hasOwnProperty(key)) {\n                var o = parent[key];\n                if (o instanceof ModelBase) {\n                    o._checkIsLocked = this._checkIsLocked;\n                    this._bindLockPredicate(o);\n                }\n            }\n        }\n    }\n}\n\nexport default ModelRootBase;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/model/ModelRootBase.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport Observable from '../Observable';\nimport { Guard } from '../../system';\n\n// TODO beta, needs test\nObservable.prototype.take = function(number) {\n    Guard.isNumber(number, \"provided value isn't a number\");\n    var source = this;\n    var itemsReceived = 0;\n    var hasCompleted = false;\n    var observe =  observer => {\n        return source.observe(\n            (arg1, arg2, arg3) => {\n                // there is possibly some strange edge cases if the observer also pumps a new value, this 'should' cover that (no tests yet)\n                itemsReceived++;\n                var shouldYield = !number || itemsReceived <= number;\n                if(shouldYield) {\n                    observer.onNext(arg1, arg2, arg3);\n                }\n                var shouldComplete = !number || itemsReceived >= number;\n                if(!hasCompleted && shouldComplete) {\n                    hasCompleted = true;\n                    observer.onCompleted();\n                }\n            },\n            observer.onError.bind(observer),\n            () => observer.onCompleted()\n        );\n    };\n    return new Observable(observe, this._router);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/extMethods/take.js\n **/","// notice_start\n/*\n * Copyright 2015 Keith Woods\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n // notice_end\n\nimport { utils } from '../system';\nimport Observable from './Observable';\n\nclass Subject extends Observable  {\n    constructor(router) {\n        super(observe.bind(this), router);\n        this._observers = [];\n        this._hasComplete = false;\n        this._hasError = false;\n    }\n    get hasError() {\n        return this._hasError;\n    }\n    get error() {\n        return this._error;\n    }\n    // The reactivate implementation can push 3 arguments through the stream, initially this was setup to\n    // pass all arguments using .apply, however it's performance is about 40% slower than direct method calls\n    // given this, and that we only ever push a max of 3 args, it makes sense to hard code them.\n    onNext(arg1, arg2, arg3) {\n        if(!this._hasComplete) {\n            var os = this._observers.slice(0);\n            for (var i = 0, len = os.length; i < len; i++) {\n                if(this._hasError) break;\n                var observer = os[i];\n                try {\n                    observer.onNext(arg1, arg2, arg3);\n                } catch (err) {\n                    this._hasError = true;\n                    this._error = err;\n                    observer.onError(err);\n                }\n            }\n        }\n    }\n    onCompleted() {\n        if(!this._hasComplete && !this._hasError) {\n            this._hasComplete = true;\n            var os = this._observers.slice(0);\n            for (var i = 0, len = os.length; i < len; i++) {\n                var observer = os[i];\n                observer.onCompleted();\n            }\n        }\n    }\n    onError(err) {\n        if(!this._hasError) {\n            this._hasError = true;\n            var os = this._observers.slice(0);\n            for (var i = 0, len = os.length; i < len; i++) {\n                var observer = os[i];\n                observer.onError(err);\n            }\n        }\n    }\n    getObserverCount() {\n        return this._observers.length;\n    }\n}\nfunction observe(observer) {\n    /*jshint validthis:true */\n    this._observers.push(observer);\n    return {\n        dispose: () => {\n            utils.removeAll(this._observers, observer);\n        }\n    };\n}\nexport default Subject;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/source-map-loader!./src/reactive/Subject.js\n **/"],"sourceRoot":""}